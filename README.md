# 固定目标求最优解
## 事先运行程序生成地图，存入内存当中
产生的数据包括：自动获取cpu核心数 threadnum
生成threadnunm个数据地图，尺寸为leng*wid,给出节点密度和节点个数两个参数，进行调节时可以分别对这两个参数进行调整。生成的地图存入内存即可，不需要单独存储。

## 然后进行六边形栅格规划，规划的目的是搞清楚每个节点存在与哪个六边形栅格中，并搞清楚每个六边形栅格中的节点个数
规划完成后可以得到各个节点所在的节点位置，该位置使用六边形栅格坐标表示，由于六边形栅格边界为六边形，所以节点所在坐标位置界定需要程序识别。
可以注意到，现在出现的元素包括六边形栅格与节点两种，这两种元素通过地图坐标进行连结，预设类三种，map,point,grid，map类需要包含六边形栅格坐标与平面直角坐标两种。

## 算法模块
统一算法模块接口，传入接口包括map，point，grid三种类的参数，map下存储若干point和gird数据。
得到遍历路线后存入map类中。由于可以运行多种算法，因此map类中应当留出多种算法的路径存储。

## 评估性能
在每一种算法运行结束后对算法的运行时间和所得路径进行评估，评估对象为简单遍历得到的基本值，基本值为固定值，通过研究所得数值与基本值的比例求出结果。

## 得到结果后存储并绘图
绘图内容包括：挑选最好的结果与最坏的结果进行展示，计算出平均值与中位数。
在程序开始运行前以当前时间新建文件夹，在算法运行结束后将数据存入文件夹，并按照一定规律给出解释。

# 设计类图
在整个算法流程中需要三个类，map，point，grid以map为主类，其余两个类为数据类。
map中的points与grid都需要存储哪些数据？
首先要明确map与points，grids的功能界限，很明显。

# 首先实现单线程
编写model文件中的三个类，Map，Point，Grid 
## Map类解析
Map类在每个线程中只有一个，是任务处理的唯一最小单元，在Map类中应当包含所有Point和Grid数据，并且应当包含算法的运行结果。

grids中也应当包含所有的栅格数据，并且应当包含每个栅格中的节点数据。因为栅格划分规则固定，所以应该把所有栅格实例都加入到grids中，并且在生成节点时，应当将节点加入到对应的栅格中。

| 属性/参数      | 数据类型/默认值       | 说明                                                     |
|----------------|----------------------|----------------------------------------------------------|
| `length`       | float (默认 100)     | 地图长度（横向尺寸）                                     |
| `width`        | float (默认 100)     | 地图宽度（纵向尺寸）                                     |
| `hex_size`     | float (默认 5)       | 六边形栅格边长，用于计算栅格中心                         |
| `point_num`    | int (默认 1000)      | 生成的随机节点数量                                       |
| `density`      | None                 | 点的密度函数，当前设为 None                              |
| `points`       | list                 | 存储生成的 Point 实例列表                                |
| `grids`        | set (默认 {(0, 0)})  | 存储栅格坐标，目前初始只包含 (0, 0)                      |
| `paths`        | dict                 | 存储算法求解路径的结果                                  |
| `performance`  | dict                 | 存储算法的运行性能数据                                  |


## Point 类解析

| 属性/参数    | 数据类型            | 说明                                             |
|--------------|---------------------|--------------------------------------------------|
| `x`          | float               | 节点的 x 坐标（平面直角坐标）                     |
| `y`          | float               | 节点的 y 坐标（平面直角坐标）                     |
| `id`         | int 或 None         | 节点标识符（可选）                                |
| `grid_coord` | tuple 或 None       | 节点所在的六边形栅格坐标，由 Map 类分配            |


## Grid 类解析

| 属性/参数    | 数据类型  | 说明                                                   |
|--------------|-----------|--------------------------------------------------------|
| `q`          | int       | 六边形栅格在轴坐标系中的 q 坐标                          |
| `r`          | int       | 六边形栅格在轴坐标系中的 r 坐标                          |
| `hex_size`   | float     | 六边形的边长，用于计算栅格中心                         |
| `center`     | tuple     | 通过 `calculate_center` 方法计算得到的六边形中心坐标      |
| `points`     | list      | 存储属于该栅格内的 Point 实例                           |


# 代码的执行顺序

在代码运行时应当先执行初始化，每个线程初始化一个图，图在创建时会调用节点生成函数，生成结束后进行栅格初始化，栅格id应当由坐标组成，对栅格进行查找时也应当使用坐标进行寻址。当栅格生成时查询节点并将节点填充到栅格中。